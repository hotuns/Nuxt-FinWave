# FinWave 到路亚记迁移指南

## 一、保留的通用功能

### 1. 基础框架

- Nuxt 3 框架
- TypeScript 支持
- Tailwind CSS + DaisyUI
- PWA 支持
- 国际化支持

### 2. 通用组件

- 导航栏组件
- 主题切换
- Cookie 管理
- 本地存储
- 通知系统
- 加载状态
- 错误处理

### 3. 工具函数

- 日期处理
- 货币格式化
- 颜色管理
- 状态管理
- 路由管理

## 二、功能模块迁移计划

### 1. 交易管理 → 垂钓记录

- **保留部分**：

  - 表单验证逻辑
  - 列表展示组件
  - 搜索和筛选功能
  - 分页组件

- **改造部分**：
  - 添加地图选点功能
  - 集成照片上传
  - 增加鱼种选择器
  - 添加装备组合关联

### 2. 类别管理 → 装备组合

- **保留部分**：

  - 分类管理逻辑
  - 树形选择器
  - 颜色标记系统

- **改造部分**：
  - 增加装备类型管理
  - 添加组合模板系统
  - 集成装备图片管理
  - 添加成功率统计

### 3. 数据分析 → 数据统计

- **保留部分**：

  - 图表组件
  - 数据筛选逻辑
  - 导出功能

- **改造部分**：
  - 添加热力地图
  - 增加天气关联分析
  - 添加装备效能分析
  - 集成钓点统计

### 4. 笔记功能 → 记录补充

- **保留部分**：

  - 富文本编辑器
  - 笔记分类管理
  - 搜索功能

- **改造部分**：
  - 增加照片管理
  - 添加气象数据关联
  - 集成装备详情展示

## 三、新增功能开发计划

### 1. 地图系统

- 集成高德/Google 地图
- 实现钓点标记
- 添加轨迹记录
- 支持离线地图

### 2. 天气系统

- 集成天气 API
- 历史天气数据
- 天气影响分析

### 3. 社交功能

- 记录分享
- 组合点赞
- 附近钓友
- 挑战系统

## 四、目录结构迁移

```
luyaji-frontend/
├── components/             # 组件目录
│   ├── common/            # 通用组件（保留）
│   ├── record/            # 垂钓记录组件
│   ├── equipment/         # 装备组合组件
│   ├── analysis/          # 数据分析组件
│   ├── map/              # 地图相关组件
│   └── social/           # 社交相关组件
├── composables/           # 组合式函数
│   ├── common/           # 通用函数（保留）
│   ├── useRecord.ts      # 记录管理
│   ├── useMap.ts         # 地图管理
│   ├── useWeather.ts     # 天气管理
│   └── useSocial.ts      # 社交功能
├── pages/                # 页面目录
│   ├── record/          # 记录页面
│   ├── equipment/       # 装备页面
│   ├── analysis/        # 分析页面
│   └── social/          # 社交页面
└── libs/                # 工具库
    ├── map/            # 地图相关
    ├── weather/        # 天气相关
    └── social/         # 社交相关
```

## 六、注意事项

1. **数据迁移**

   - 确保本地存储结构兼容
   - 保留用户设置
   - 处理数据格式转换

2. **性能优化**

   - 图片压缩处理
   - 地图数据缓存
   - 离线数据同步

3. **用户体验**

   - 保持操作习惯
   - 优化移动端体验
   - 完善错误提示

4. **安全性**
   - 位置信息保护
   - 隐私数据加密
   - 权限控制

## 七、依赖更新

### 新增依赖

- 地图 SDK（高德/Google）
- 天气 API 客户端
- 图片处理库
- 社交分享 SDK

### 保留依赖

- @vueuse/core
- vue3-apexcharts
- @vuepic/vue-datepicker
- vue3-treeselect

# FinWave 到路亚记功能模块对比

## 一、核心功能对比

### 1. 记录系统

| FinWave 功能 | 路亚记对应功能 | 可复用程度 | 需要修改部分                                                 |
| ------------ | -------------- | ---------- | ------------------------------------------------------------ |
| 交易记录     | 垂钓记录       | 高         | - 表单结构相似<br>- 列表展示逻辑相同<br>- 搜索筛选功能可复用 |
| 交易分类     | 装备组合       | 中         | - 分类逻辑可复用<br>- 需要增加装备类型<br>- 添加图片支持     |
| 交易标签     | 场景标签       | 高         | - 标签系统可直接复用<br>- 需要修改标签类型                   |
| 定期交易     | 模板系统       | 中         | - 定期逻辑可复用<br>- 需要修改为模板逻辑                     |

### 2. 数据管理

| FinWave 功能 | 路亚记对应功能 | 可复用程度 | 需要修改部分                               |
| ------------ | -------------- | ---------- | ------------------------------------------ |
| 账户管理     | 装备管理       | 中         | - 管理界面可复用<br>- 数据结构需要调整     |
| 货币管理     | 天气管理       | 低         | - 需要重新实现<br>- 可复用 API 调用逻辑    |
| 笔记系统     | 记录补充       | 高         | - 富文本编辑器可复用<br>- 需要增加照片管理 |

### 3. 分析功能

| FinWave 功能 | 路亚记对应功能 | 可复用程度 | 需要修改部分                           |
| ------------ | -------------- | ---------- | -------------------------------------- |
| 收支分析     | 成功率分析     | 高         | - 图表组件可复用<br>- 需要修改分析维度 |
| 预算分析     | 装备效能       | 中         | - 分析逻辑可复用<br>- 需要增加雷达图   |
| 趋势图表     | 时间规律       | 高         | - 图表组件可复用<br>- 需要修改数据源   |

## 二、组件迁移计划

### 1. 可直接复用组件

```typescript
// 通用组件
- 导航栏组件 (nav/)
- 按钮组件 (buttons/)
- 模态框组件 (modal/)
- 选择器组件 (select/)
- 通知系统 (toasts/)

// 功能组件
- 列表组件 (transactions/list/)
- 表单组件 (transactions/form/)
- 图表组件 (analytics/charts/)
- 搜索组件 (misc/search/)
```

### 2. 需要改造组件

```typescript
// 记录相关
- 交易表单 → 垂钓记录表单
  - 增加地图选点
  - 增加照片上传
  - 增加鱼种选择

// 装备相关
- 类别管理 → 装备组合管理
  - 增加装备类型
  - 增加图片管理
  - 增加成功率统计

// 分析相关
- 收支分析 → 成功率分析
  - 修改分析维度
  - 增加热力地图
  - 增加天气关联
```

### 3. 需要新增组件

```typescript
// 地图相关
-地图选点组件 -
  轨迹记录组件 -
  热力地图组件 -
  // 天气相关
  天气数据组件 -
  水温预测组件 -
  // 社交相关
  分享卡片组件 -
  附近钓友组件 -
  挑战任务组件;
```

## 三、数据模型迁移

### 1. 存储结构对比

```typescript
// FinWave 存储结构
localStorage/
├── transactions/     # 交易记录
├── categories/       # 分类管理
├── accounts/         # 账户管理
├── notes/           # 笔记管理
└── settings/        # 用户设置

// 路亚记存储结构
localStorage/
├── records/         # 垂钓记录
├── equipment/       # 装备组合
├── weather/         # 天气数据
├── analytics/       # 分析数据
└── settings/        # 用户设置
```

### 2. 数据模型转换

```typescript
// 交易记录 → 垂钓记录
interface Transaction {
  id: string;
  amount: number;
  category: string;
  account: string;
  date: Date;
  notes: string;
}

interface FishingRecord {
  id: string;
  timestamp: Date;
  location: Location;
  fishSpecies: string[];
  equipmentCombo: string;
  photos: string[];
  weather: WeatherData;
  notes: string;
}

// 类别 → 装备组合
interface Category {
  id: string;
  name: string;
  type: "income" | "expense";
  color: string;
  parentId?: string;
}

interface EquipmentCombo {
  id: string;
  name: string;
  targetSpecies: string[];
  scenarios: string[];
  equipment: Equipment;
  photos: string[];
  stats: Stats;
}
```

## 四、开发优先级

### 1. 第一阶段：基础功能

- 垂钓记录系统（基于交易系统改造）
- 装备组合管理（基于类别管理改造）
- 基础数据分析（复用现有图表）

### 2. 第二阶段：核心功能

- 地图系统集成
- 天气数据集成
- 照片管理系统

### 3. 第三阶段：特色功能

- 社交分享功能
- 挑战任务系统
- 离线支持优化

### 4. 第四阶段：完善优化

- 性能优化
- 用户体验改进
- 测试和文档
